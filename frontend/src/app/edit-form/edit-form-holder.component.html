<div class="container-fluid">

    <div *ngIf="loading">
        <h1>Loading...</h1>
    </div>

    <div *ngIf="showError">
        <h1>Error loading the form</h1>
    </div>

    <div *ngIf="!loading && !showError">
        <form [formGroup]="dynamicForm" (ngSubmit)="submitUpdatedForm()" class="example-form">
            <mat-card class="rounded-4">
                <mat-card-content class="display-6">{{ this.dynamicForm.get('formName').value }}</mat-card-content>
            </mat-card>
    
            <ng-container *ngFor="let element of dynamicForm.get('completeForm')['controls'] ; index as i">
                <mat-card class="my-4 rounded-4">
                    <app-form-text-field *ngIf="element.value.type === 'text'" [elementGroup]="element"/>
                    <app-form-number-field *ngIf="element.value.type === 'number'" [elementGroup]="element"/>
                    <app-form-multiple-options-field *ngIf="element.value.type === 'dropdown' || element.value.type === 'radioButtons' || element.value.type === 'checkboxes'" [elementGroup]="element"/>
                </mat-card>
            </ng-container>
    
            
            <div class="container m-0 p-0 d-flex flex-row justify-content-end">
                <mat-card class="d-flex flex-row p-3 rounded-4">
                    <button mat-fab color="primary" class="me-3" aria-label="Example icon button with a plus one icon">
                        <mat-icon>add</mat-icon>
                    </button>
            
                    <button mat-fab color="primary" aria-label="Example icon button with a plus one icon" [disabled]="!canSubmitForm">
                        <mat-icon>done</mat-icon>
                    </button>
                </mat-card>
            </div>
        </form>
    </div>
</div>